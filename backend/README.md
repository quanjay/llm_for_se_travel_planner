# Backend - FastAPI Travel Planner API

AIæ—…è¡Œè§„åˆ’å¸ˆçš„åç«¯APIæœåŠ¡ï¼ŒåŸºäºFastAPIæ¡†æ¶å¼€å‘ï¼Œæä¾›ç”¨æˆ·è®¤è¯ã€è¡Œç¨‹è§„åˆ’ã€è´¹ç”¨ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- âœ… **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ** - æ³¨å†Œã€ç™»å½•ã€JWT Tokenç®¡ç†
- âœ… **æ™ºèƒ½è¡Œç¨‹è§„åˆ’** - é›†æˆé€šä¹‰åƒé—®AIï¼Œè‡ªåŠ¨ç”Ÿæˆä¸ªæ€§åŒ–è¡Œç¨‹
- âœ… **è´¹ç”¨ç®¡ç†** - é¢„ç®—åˆ†æã€æ”¯å‡ºè®°å½•ã€ç»Ÿè®¡æŠ¥è¡¨
- âœ… **RESTful API** - æ ‡å‡†åŒ–çš„APIæ¥å£è®¾è®¡
- âœ… **æ•°æ®éªŒè¯** - Pydanticæ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- âœ… **å®‰å…¨è®¤è¯** - JWTèº«ä»½éªŒè¯å’Œæƒé™æ§åˆ¶

## ğŸ›  æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: FastAPI 0.104.1 - é«˜æ€§èƒ½å¼‚æ­¥Webæ¡†æ¶
- **æ•°æ®åº“**: MySQL 8.0 - å…³ç³»å‹æ•°æ®åº“
- **ORM**: SQLAlchemy 2.0 - å¼ºå¤§çš„å¯¹è±¡å…³ç³»æ˜ å°„
- **è®¤è¯**: JWT (python-jose) - JSON Web Token
- **å¯†ç åŠ å¯†**: bcrypt (passlib) - å®‰å…¨å¯†ç åŠ å¯†
- **æ•°æ®è¿ç§»**: Alembic - æ•°æ®åº“ç‰ˆæœ¬æ§åˆ¶
- **æ•°æ®éªŒè¯**: Pydantic - ç±»å‹éªŒè¯å’Œåºåˆ—åŒ–
- **AIé›†æˆ**: é€šä¹‰åƒé—®API - æ™ºèƒ½è¡Œç¨‹ç”Ÿæˆ

## é¡¹ç›®ç»“æ„

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ routes/          # APIè·¯ç”±
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒé…ç½®
â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ schemas/            # Pydanticæ¨¡å¼
â”‚   â”œâ”€â”€ services/           # ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ alembic/                # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ scripts/                # åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ main.py                 # åº”ç”¨å…¥å£
â””â”€â”€ requirements.txt        # ä¾èµ–åŒ…
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env` æ–‡ä»¶å¹¶ä¿®æ”¹é…ç½®ï¼š

```bash
cp .env.example .env
```

é…ç½®æ•°æ®åº“è¿æ¥å’Œå…¶ä»–å¿…è¦å‚æ•°ã€‚

### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
# æ–¹å¼1: ä½¿ç”¨Alembicè¿ç§»ï¼ˆæ¨èï¼‰
alembic upgrade head

# æ–¹å¼2: ç›´æ¥åˆ›å»ºè¡¨
python scripts/init_db.py
```

### 4. å¯åŠ¨æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼
python main.py

# æˆ–ä½¿ç”¨uvicorn
uvicorn main:app --reload
```

æœåŠ¡å°†åœ¨ http://localhost:8000 å¯åŠ¨ã€‚

## APIæ–‡æ¡£

å¯åŠ¨æœåŠ¡åï¼Œè®¿é—®ä»¥ä¸‹åœ°å€æŸ¥çœ‹APIæ–‡æ¡£ï¼š

- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## æ•°æ®åº“è¡¨ç»“æ„

### ç”¨æˆ·è¡¨ (users)
- id: ä¸»é”®
- email: é‚®ç®±ï¼ˆå”¯ä¸€ï¼‰
- username: ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰
- hashed_password: åŠ å¯†å¯†ç 
- phone: æ‰‹æœºå·
- avatar: å¤´åƒURL
- created_at: åˆ›å»ºæ—¶é—´
- updated_at: æ›´æ–°æ—¶é—´

### æ—…è¡Œè®¡åˆ’è¡¨ (travel_plans)
- id: ä¸»é”®
- user_id: ç”¨æˆ·IDï¼ˆå¤–é”®ï¼‰
- title: è¡Œç¨‹æ ‡é¢˜
- destination: ç›®çš„åœ°
- start_date: å¼€å§‹æ—¥æœŸ
- end_date: ç»“æŸæ—¥æœŸ
- budget: é¢„ç®—
- people_count: äººæ•°
- preferences: åå¥½ï¼ˆJSONï¼‰
- itinerary: è¯¦ç»†è¡Œç¨‹ï¼ˆJSONï¼‰
- total_cost: æ€»èŠ±è´¹
- status: çŠ¶æ€ï¼ˆdraft/published/completedï¼‰
- created_at: åˆ›å»ºæ—¶é—´
- updated_at: æ›´æ–°æ—¶é—´

### è´¹ç”¨è®°å½•è¡¨ (expenses)
- id: ä¸»é”®
- travel_plan_id: è¡Œç¨‹IDï¼ˆå¤–é”®ï¼‰
- category: è´¹ç”¨ç±»åˆ«
- amount: é‡‘é¢
- description: æè¿°
- expense_date: æ¶ˆè´¹æ—¥æœŸ
- created_at: åˆ›å»ºæ—¶é—´
- updated_at: æ›´æ–°æ—¶é—´

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„APIç«¯ç‚¹

1. åœ¨ `app/api/routes/` ä¸­åˆ›å»ºæˆ–ä¿®æ”¹è·¯ç”±æ–‡ä»¶
2. åœ¨ `app/schemas/` ä¸­å®šä¹‰Pydanticæ¨¡å¼
3. åœ¨ `app/models/` ä¸­å®šä¹‰æ•°æ®æ¨¡å‹ï¼ˆå¦‚éœ€è¦ï¼‰
4. åœ¨ `main.py` ä¸­æ³¨å†Œè·¯ç”±

### æ•°æ®åº“è¿ç§»

```bash
# ç”Ÿæˆæ–°çš„è¿ç§»æ–‡ä»¶
alembic revision --autogenerate -m "æè¿°å˜æ›´"

# åº”ç”¨è¿ç§»
alembic upgrade head

# å›æ»šè¿ç§»
alembic downgrade -1
```

## ç¯å¢ƒå˜é‡è¯´æ˜

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| DEBUG | è°ƒè¯•æ¨¡å¼ | False |
| SECRET_KEY | JWTå¯†é’¥ | éœ€è¦è®¾ç½® |
| DATABASE_URL | æ•°æ®åº“è¿æ¥URL | éœ€è¦è®¾ç½® |
| QIANWEN_API_KEY | é€šä¹‰åƒé—®APIå¯†é’¥ | éœ€è¦è®¾ç½® |

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤å˜æ›´
4. å‘èµ· Pull Request

## è®¸å¯è¯

MIT License